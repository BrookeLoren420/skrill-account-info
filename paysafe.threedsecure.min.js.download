var paysafe="object"==typeof paysafe?paysafe:{};paysafe.threedsecure=function(e){var n={};function r(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=n,r.d=function(e,n,t){r.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,n){if(1&n&&(e=r(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(r.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)r.d(t,i,function(n){return e[n]}.bind(null,i));return t},r.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(n,"a",n),n},r.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},r.p="",r(r.s=10)}([function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.HttpErrorHandler=n.TDSErrorGenerator=n.TDSError=void 0;var t,i=r(1),a=function(){function e(e,n,r,t){void 0===n&&(n="There was an error ("+e+"), please contact our support."),void 0===r&&(r="There was an error ("+e+"), please contact our support."),this.code=e,this.detailedMessage=n,this.displayMessage=r,this.correlationId=t,this.name="TDSError",this.message=this.displayMessage}return e.prototype.toString=function(){return JSON.stringify(this)},e}();n.TDSError=a,function(e){e.createInvalidCallbackError=function(){return new a("9004","Callback should be function.")},e.createInvalidNumberOfArgumentsError=function(){return new a("9012","Invalid number of arguments.")},e.createInvalidApiKeyError=function(e){return new a("9013","Invalid apiKey parameter.",void 0,e)},e.createInternalSdkError=function(e){return new a("9014","Unhandled error occurred.",void 0,e)},e.createInvalidOptionsArgumentError=function(e){return new a("9015","Invalid options argument.",void 0,e)},e.createInvalidOptionFieldsError=function(e,n){return new a("9500","Invalid option fields: "+e.toString(),void 0,n)},e.createInvalidMerchantConfigurationSetup=function(e){return new a("9501","Invalid merchant configuration setup.",void 0,e)}}(t=n.TDSErrorGenerator||(n.TDSErrorGenerator={})),function(e){e.handleHttpError=function(e,n,r,a,o){n&&"5050"===n.code?r(void 0,t.createInvalidMerchantConfigurationSetup(a.correlationId)):r(void 0,403===e||401===e?t.createInvalidApiKeyError(a.correlationId):t.createInternalSdkError(a.correlationId)),0!==e||n||i.LoggerService.logNetworkError(o,a)}}(n.HttpErrorHandler||(n.HttpErrorHandler={}))},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.LoggerService=n.LogEvent=void 0;var t=r(5),i=r(2),a=function(e,n){this.eventType=e,this.eventMessage=n,this.sdk=t.SDK_META_INFO,this.additionalData={}};n.LogEvent=a,function(e){function n(e,n,r){e.additionalData={},e.additionalData=function(e,n){var r=n?JSON.parse(JSON.stringify(n)):{};e.accountId&&(r.accountId=e.accountId);return r}(n,r),i.HttpClient.post(n.environmentUrl+"/threedsecure/v2/log",e,n,(function(){}),(function(){}))}e.logInternalSdkError=function(e,r,t){n(new a("INTERNAL_SDK_ERROR",e),r,t)},e.logValidationError=function(e,r,t){n(new a("VALIDATION_ERROR",e),r,t)},e.logSuccessMessage=function(e,r,t){n(new a("SUCCESS",e),r,t)},e.logNetworkError=function(e,r){n(new a("NETWORK_ERROR","There was a network error."),r,{url:e})}}(n.LoggerService||(n.LoggerService={}))},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.HttpClient=void 0,function(e){function n(e,n,t){r("GET",e,n,t)}function r(e,n,r,t,i){try{var a=new XMLHttpRequest;for(var o in a.open(e,n,!0),a.onreadystatechange=function(){4===a.readyState&&t(a.status,a.responseText)},r){var c=r[o];a.setRequestHeader(o,c)}a.timeout=1e4,a.send(null!==i||void 0!==i?i:void 0)}catch(e){e&&/Access is denied/.test(e.message)?t(0,void 0):t(0,JSON.stringify(e))}}function t(e,n,r,t,i){if(void 0===i&&(i=function(){return!0}),0!==e||n){var a=void 0;try{a=JSON.parse(n)}catch(e){}200===e?t(a,e):a&&a.error&&a.error.code&&a.error.message?r(a.error,e):r(void 0,e)}else r(void 0,e)}function i(e){var n={"X-INTERNAL-CORRELATION-ID":e.correlationId,Authorization:"Basic "+e.apiKey,"Content-Type":"application/json"};return e.accountId&&(n["X-ACCOUNT-ID"]=e.accountId),n}e.httpPost=function(e,n,t,i){r("POST",e,t,i,n)},e.httpGet=n,e.sendRequest=r,e.post=function(n,r,a,o,c){e.httpPost(n,JSON.stringify(r),i(a),(function(e,n){return t(e,n,o,c)}))},e.get=function(e,r,a,o){n(e,i(r),(function(e,n){return t(e,n,a,o)}))}}(n.HttpClient||(n.HttpClient={}))},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.SharedValidator=void 0;var t=r(0);!function(e){function n(e){return"function"==typeof e}e.initialValidation=function(e,r){if(3!==r)throw t.TDSErrorGenerator.createInvalidNumberOfArgumentsError();if(!n(e))throw t.TDSErrorGenerator.createInvalidCallbackError()},e.isFunction=n,e.isString=function(e){return"string"==typeof e},e.isObject=function(e){return"object"==typeof e&&null!==e&&"[object Array]"!==Object.prototype.toString.call(e)},e.isApiKey=function(e){try{return!n(window.atob)||-1!==window.atob(e).indexOf(":")}catch(e){return!1}},e.isValidAccountId=function(e){return RegExp("^\\d*$").test(e)}}(n.SharedValidator||(n.SharedValidator={}))},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.CardinalHandler=void 0;var t=r(0),i=r(1);!function(e){var n;function r(){Cardinal.off("payments.setupComplete"),Cardinal.off("payments.validated")}e.handleBinChange=function(e,n,r,a){Cardinal.trigger("bin.process",e).then((function(t){t.Status?(i.LoggerService.logSuccessMessage("DeviceFingerPrinting completed successfully.",a,{cardBin:e}),r(n,void 0)):(i.LoggerService.logSuccessMessage("DeviceFingerPrinting already performed.",a,{cardBin:e}),r(n,void 0))})).catch((function(n){i.LoggerService.logInternalSdkError("DeviceFingerPrinting failed.",a,{cardBin:e,error:JSON.stringify(n)}),r(void 0,t.TDSErrorGenerator.createInternalSdkError(a.correlationId))}))},e.cardinalDeviceFingerprinting=function(e,n,a){Cardinal.on("payments.setupComplete",(function(t){i.LoggerService.logSuccessMessage("DeviceFingerPrinting completed successfully",a),n(e.deviceFingerprintingId,void 0),r()})),Cardinal.on("payments.validated",(function(e,o){i.LoggerService.logInternalSdkError("DeviceFingerPrinting failed.",a,{error:JSON.stringify(e)}),n(void 0,t.TDSErrorGenerator.createInternalSdkError(a.correlationId)),r()})),Cardinal.configure({timeout:1e4}),Cardinal.setup("init",{jwt:e.jwt})},e.cardinalChallenge=function(e,n,t,a){i.LoggerService.logSuccessMessage("Challenge initiated.",a,{accountId:e.accountId,authenticationId:e.id,transactionId:e.transactionId}),Cardinal.on("payments.validated",(function(t,o){i.LoggerService.logSuccessMessage("Challenge passed.",a,{accountId:e.accountId,authenticationId:e.id,transactionId:e.transactionId}),n(o,t),r()})),Cardinal.continue("cca",function(e){return{AcsUrl:e.acsUrl,Payload:e.payload}}(e),function(e){return{OrderDetails:{TransactionId:e.transactionId}}}(e))},e.configureInlineChallenge=function(e){n=e,Cardinal.configure({payment:{view:"inline",framework:"inline",displayLoading:!0}})},e.renderChallengeInline=function(e,r,t){void 0!==n&&""!==n&&Cardinal.on("ui.inline.setup",(function(e,r,a,o){try{var c=void 0;if(void 0===e||void 0===r)throw new Error("Unable to process request due to invalid arguments");if("CCA"!==r.paymentType)throw new Error("Unsupported payment type found ["+r.paymentType+"]");if(null==(c=document.getElementById(n)))throw new Error("Element ["+n+"] was not found");c.innerHTML=e,Cardinal.off("ui.inline.setup"),a()}catch(e){i.LoggerService.logInternalSdkError(e.message,t),Cardinal.off("ui.inline.setup"),setTimeout(o(e),0)}}))}}(n.CardinalHandler||(n.CardinalHandler={}))},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.SDK_META_INFO=void 0,n.SDK_META_INFO={version:"1.0.0",type:"BROWSER"}},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ChallengeOptions=void 0;var t=function(){function e(e,n,r){this.environment=n,this.sdkChallengePayload=e,this.payloadContainer=void 0,this.inlineSelector=r}return e.prototype.getPayloadContainer=function(){return this.payloadContainer=JSON.parse(window.atob(this.sdkChallengePayload))},e}();n.ChallengeOptions=t},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.EnvironmentService=void 0,function(e){e.resolveUrl=function(e){var n="https://api.paysafe.com";return"TEST"===e?n="https://api.test.paysafe.com":null!=e&&"LIVE"!==e&&(n=e),n}}(n.EnvironmentService||(n.EnvironmentService={}))},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.StartHandler=void 0;var t=r(4),i=r(0),a=r(2),o=r(15);!function(e){var n;e.start=function(e,r,c){if(c.accountId=e.accountId,n)t.CardinalHandler.handleBinChange(e.card.cardBin,n.deviceFingerprintingId,r,c);else{var d=c.environmentUrl+"/threedsecure/v2/jwt";a.HttpClient.post(d,new o.JwtRequest(e.card,e.accountId),c,(function(e,n){i.HttpErrorHandler.handleHttpError(n,e,r,c,d)}),(function(i){n=i,void 0!==e.inlineSelector&&""!==e.inlineSelector&&t.CardinalHandler.configureInlineChallenge(e.inlineSelector),t.CardinalHandler.cardinalDeviceFingerprinting(i,r,c)}))}}}(n.StartHandler||(n.StartHandler={}))},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.StartValidator=void 0;var t=r(0),i=r(3);!function(e){function n(e,n){var o=[];if(!i.SharedValidator.isObject(e))throw t.TDSErrorGenerator.createInvalidOptionsArgumentError(n);if(r(e.card)||o.push("card"),i.SharedValidator.isValidAccountId(e.accountId)||o.push("accountId"),e.card&&!a(e.card.cardBin)&&o.push("cardBin"),0!==o.length)throw t.TDSErrorGenerator.createInvalidOptionFieldsError(o,n)}function r(e){return i.SharedValidator.isObject(e)&&void 0!==e}function a(e){return RegExp("^\\d{6,8}$").test(e)}e.validateStartCall=function(e,r,a){if(!i.SharedValidator.isApiKey(r))throw t.TDSErrorGenerator.createInvalidApiKeyError();n(e,a)},e.validateStartOptions=n,e.isValidCard=r,e.isValidCardBin=a,e.isValidColorDepth=function(e){return[1,4,8,15,16,24,32,48].indexOf(e)>-1}}(n.StartValidator||(n.StartValidator={}))},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.challenge=n.start=void 0;var t=r(11),i=r(6),a=r(13),o=r(14),c=r(16),d=r(17),l=r(7),u=r(0),s=r(1),f=r(3),v=r(8),g=r(18),p=r(9);function h(e,n,r){var i=e.getPayloadContainer();S(new g.StartOptions(i.accountId,new c.Card(i.cardBin),e.environment,e.inlineSelector),(function(a,o){null!=o?(s.LoggerService.logInternalSdkError("Initializing the cardinal during separated challenge call failed",n,{accountId:i.accountId}),r(void 0,u.TDSErrorGenerator.createInternalSdkError(n.correlationId))):setTimeout((function(){t.ChallengeHandler.challenge(e,r,n)}),0)}),n)}function S(e,n,r){o.DynamicSdkLoader.loadExternalSdk(e,n,r)}function y(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var n=16*Math.random()|0;return("x"===e?n:3&n|8).toString(16)}))}function I(e,n,r,t,i){if("9500"===e.code||"9015"===e.code){var a=new d.ClientInfo(n,l.EnvironmentService.resolveUrl(i.environment),r);s.LoggerService.logValidationError(e.toString(),a,{cardBin:i.card?i.card.cardBin:void 0,accountId:i.accountId})}t(void 0,e)}n.start=function(e,n,r){var t=y(),i=void 0;f.SharedValidator.initialValidation(r,arguments.length);try{p.StartValidator.validateStartCall(n,e,t)}catch(i){return void I(i,e,t,r,n)}i=new d.ClientInfo(e,l.EnvironmentService.resolveUrl(n.environment),t),n=new g.StartOptions(n.accountId,n.card,n.environment,n.inlineSelector),o.DynamicSdkLoader.isSdkLoaded()?(s.LoggerService.logSuccessMessage("External SDK was already loaded",i),v.StartHandler.start(n,r,i)):S(n,r,i)},n.challenge=function(e,n,r){var c=y();f.SharedValidator.initialValidation(r,arguments.length);try{a.ChallengeValidator.validateChallengeCall(n,e,c)}catch(t){return void I(t,e,c,r,n)}n=new i.ChallengeOptions(n.sdkChallengePayload,n.environment,n.inlineSelector);var u=new d.ClientInfo(e,l.EnvironmentService.resolveUrl(n.environment),c);o.DynamicSdkLoader.isSdkLoaded()?t.ChallengeHandler.challenge(n,r,u):h(n,u,r)}},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ChallengeHandler=void 0;var t=r(4),i=r(0),a=r(2),o=r(1),c=r(12);!function(e){e.challenge=function(e,n,r){var d=e.getPayloadContainer();t.CardinalHandler.renderChallengeInline(n,e,r),t.CardinalHandler.cardinalChallenge(d,(function(e,t){!function(e,n,r,t,d){var l=d.environmentUrl+"/threedsecure/v2/accounts/"+r.accountId+"/authentications/"+r.id+"/finalize";a.HttpClient.post(l,new c.FinalizeRequest(e),d,(function(e,n){i.HttpErrorHandler.handleHttpError(n,e,t,d,l)}),(function(){"ERROR"===n.ActionCode&&o.LoggerService.logInternalSdkError("Error occurred during challenge.",d,{accountId:r.accountId,authenticationId:r.id,error:JSON.stringify(n)}),t(r.id,void 0)}))}(e,t,d,n,r)}),n,r)}}(n.ChallengeHandler||(n.ChallengeHandler={}))},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.FinalizeRequest=void 0;var t=function(e){this.payload=e};n.FinalizeRequest=t},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ChallengeValidator=void 0;var t=r(0),i=r(3),a=r(6);!function(e){function n(e,n){var o=[];if(!i.SharedValidator.isObject(e))throw t.TDSErrorGenerator.createInvalidOptionsArgumentError(n);if(r(e=new a.ChallengeOptions(e.sdkChallengePayload,e.environment,e.renderSetup))||o.push("sdkChallengePayload"),0!==o.length)throw t.TDSErrorGenerator.createInvalidOptionFieldsError(o,n)}function r(e){var n;try{n=e.getPayloadContainer()}catch(e){return!1}return i.SharedValidator.isValidAccountId(n.accountId)&&i.SharedValidator.isString(n.acsUrl)&&i.SharedValidator.isString(n.id)&&i.SharedValidator.isString(n.payload)&&i.SharedValidator.isString(n.transactionId)}e.validateChallengeCall=function(e,r,a){if(!i.SharedValidator.isApiKey(r))throw t.TDSErrorGenerator.createInvalidApiKeyError();n(e,a)},e.validateChallengeOptions=n,e.isValidSdkChallengePayload=r}(n.ChallengeValidator||(n.ChallengeValidator={}))},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.DynamicSdkLoader=void 0;var t=r(7),i=r(1),a=r(8);!function(e){var n=!1;function r(e,r,t,o){if(!n){var c=document.createElement("script");c.id="providerScript",c.type="text/javascript",c.src=e,c.onload=function(){n=!0,i.LoggerService.logSuccessMessage("External SDK successfully loaded",o,{accountId:r.accountId,sdkUrl:e}),a.StartHandler.start(r,t,o)},document.head.appendChild(c)}}e.isSdkLoaded=function(){return n},e.loadExternalSdk=function(e,n,i){"LIVE"===e.environment||null===e.environment||void 0===e.environment?r("https://songbird.cardinalcommerce.com/edge/v1/songbird.js",e,n,i):r(t.EnvironmentService.resolveUrl(e.environment)+"/threedsecure/sdk",e,n,i)}}(n.DynamicSdkLoader||(n.DynamicSdkLoader={}))},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.JwtRequest=void 0;var t=r(5),i=r(9),a=function(e,n){this.browserDetails=new o,this.sdk=t.SDK_META_INFO,this.card=e,this.accountId=n};n.JwtRequest=a;var o=function(){this.javaEnabled=navigator.javaEnabled(),this.language=navigator.language,this.colorDepthBits=null!=screen.colorDepth&&null!=screen.colorDepth&&i.StartValidator.isValidColorDepth(screen.colorDepth)?screen.colorDepth:24,this.screenHeight=screen.height,this.screenWidth=screen.width,this.timezoneOffset=(new Date).getTimezoneOffset()}},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Card=void 0;var t=function(e){this.cardBin=e};n.Card=t},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ClientInfo=void 0;var t=function(e,n,r){this.apiKey=e,this.environmentUrl=n,this.correlationId=r};n.ClientInfo=t},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.StartOptions=void 0;var t=function(e,n,r,t){this.accountId=e,this.card=n,this.environment=r,this.inlineSelector=t};n.StartOptions=t}]);